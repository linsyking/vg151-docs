<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Basic C" href="../mid2/rc_part3.html" /><link rel="prev" title="ENGR151 Lab 7: Trees" href="../l7/lab7.html" />

    <meta name="generator" content="sphinx-5.3.0, furo 2022.09.29"/>
        <title>ENGR151 Lab 8: OpenGL - VG151 Documentation documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">VG151 Documentation  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">VG151 Documentation  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../unfiled/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../l7/lab7.html">Lab 7</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Lab 8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mid2/rc_part3.html">Mid 2 RC (Part 3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mid2/rc_part6.html">Mid 2 RC (Part 6)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unfiled/codecheck.html">Code Check</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="engr151-lab-8-opengl">
<h1>ENGR151 Lab 8: OpenGL<a class="headerlink" href="#engr151-lab-8-opengl" title="Permalink to this heading">#</a></h1>
<section id="opengl">
<h2>OpenGL<a class="headerlink" href="#opengl" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p>OpenGL is a cross-language, cross-platform application programming interface (API) for rendering 2D and 3D vector graphics. The API is typically used to interact with a graphics processing unit (GPU), to achieve hardware-accelerated rendering.</p>
<p class="attribution">â€”<a class="reference external" href="https://en.wikipedia.org/wiki/OpenGL">Wikipedia: OpenGL</a></p>
</div></blockquote>
</section>
<section id="glut-and-freeglut">
<h2>GLUT and FreeGLUT<a class="headerlink" href="#glut-and-freeglut" title="Permalink to this heading">#</a></h2>
<blockquote>
<div><p>The OpenGL Utility Toolkit (GLUT) is a library of utilities for OpenGL programs, which primarily perform system-level I/O with the host operating system. Functions performed include window definition, window control, and monitoring of keyboard and mouse input. Routines for drawing a number of geometric primitives (both in solid and wireframe mode) are also provided, including cubes, spheres and the Utah teapot. GLUT also has some limited support for creating pop-up menus.</p>
<p class="attribution">â€”<a class="reference external" href="https://en.wikipedia.org/wiki/OpenGL_Utility_Toolkit">Wikipedia: GLUT</a></p>
</div></blockquote>
<blockquote>
<div><p>FreeGLUT is an open-source alternative to the OpenGL Utility Toolkit (GLUT) library. GLUT (and hence FreeGLUT) allows the user to create and manage windows containing OpenGL contexts on a wide range of platforms and also read the mouse, keyboard and joystick functions. FreeGLUT is intended to be a full replacement for GLUT, and has only a few differences.</p>
<p class="attribution">â€”<a class="reference external" href="https://en.wikipedia.org/wiki/FreeGLUT">Wikipedia: FreeGLUT</a></p>
</div></blockquote>
<p>Freeglut has some limitations comparing to GLFW <a class="footnote-reference brackets" href="#id7" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>. However, in this course, we only need to use freeglut to draw some simple animations. Therefore, we wonâ€™t use more complicated libraries.</p>
<p>The freeglut project can be found on <a class="reference external" href="https://github.com/FreeGLUTProject/freeglut">this repository</a>.</p>
</section>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading">#</a></h2>
<section id="linux">
<h3>Linux<a class="headerlink" href="#linux" title="Permalink to this heading">#</a></h3>
<p>Install <code class="docutils literal notranslate"><span class="pre">glu</span></code> and <code class="docutils literal notranslate"><span class="pre">freeglut</span></code> library.</p>
</section>
<section id="macos">
<h3>MacOS<a class="headerlink" href="#macos" title="Permalink to this heading">#</a></h3>
<p>Maybe you donâ€™t need to install.</p>
</section>
<section id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this heading">#</a></h3>
<p>If you are using <code class="docutils literal notranslate"><span class="pre">MSYS2</span></code>, you can try:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pacman -S mingw-w64-x86_64-freeglut
</pre></div>
</div>
</section>
</section>
<section id="hello-teapot">
<h2>Hello Teapot<a class="headerlink" href="#hello-teapot" title="Permalink to this heading">#</a></h2>
<p>In this part, we will try to figure out how to write a Hello world program for OpenGL.</p>
<p>Copy the following code and save it to <code class="docutils literal notranslate"><span class="pre">main.cpp</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">main.cpp</span><a class="headerlink" href="#id10" title="Permalink to this code">#</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cm">/* macos */</span><span class="w"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;GLUT/glut.h&gt;</span><span class="cp"></span>
<span class="cm">/* windows */</span><span class="w"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;GL/freeglut.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;windows.h&gt;</span><span class="cp"></span>
<span class="cm">/* linux */</span><span class="w"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;GL/freeglut.h&gt;</span><span class="cp"></span>
<span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* clear window */</span><span class="w"></span>
<span class="w">    </span><span class="n">glClear</span><span class="p">(</span><span class="n">GL_COLOR_BUFFER_BIT</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* draw scene */</span><span class="w"></span>
<span class="w">    </span><span class="n">glutWireTeapot</span><span class="p">(</span><span class="mf">.5</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* flush drawing routines to the window */</span><span class="w"></span>
<span class="w">    </span><span class="n">glFlush</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* initialize GLUT, using any command line parameters passed to the program */</span><span class="w"></span>
<span class="w">    </span><span class="n">glutInit</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* setup the size, position, and display mode for new windows */</span><span class="w"></span>
<span class="w">    </span><span class="n">glutInitWindowSize</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">glutInitWindowPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">glutInitDisplayMode</span><span class="p">(</span><span class="n">GLUT_RGB</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* create and set up a window */</span><span class="w"></span>
<span class="w">    </span><span class="n">glutCreateWindow</span><span class="p">(</span><span class="s">&quot;hello, teapot!&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">glutDisplayFunc</span><span class="p">(</span><span class="n">display</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* tell GLUT to wait for events */</span><span class="w"></span>
<span class="w">    </span><span class="n">glutMainLoop</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<p>First, you have to change the code. You have to add some macros to check the OS.</p>
<p>After that, to compile it, run:</p>
<section id="id2">
<h3>Linux<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++ -Wall -Wextra -Wpedantic -Werror -std<span class="o">=</span>c++17 -o teapot main.cpp -lglut -lGL -lGLU
</pre></div>
</div>
</section>
<section id="id3">
<h3>MacOS<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++ -Wall -Wextra -Wpedantic -Werror -std<span class="o">=</span>c++17 -o teapot main.cpp -framework OpenGL -framework GLUT
</pre></div>
</div>
</section>
<section id="id4">
<h3>Windows<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++ -Wall -Wextra -Wpedantic -Werror -std<span class="o">=</span>c++17 -o teapot main.cpp -lglu32 -lfreeglut -lopengl32
</pre></div>
</div>
<p>However, to make our life easier, we have to write a <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> or <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> to help us compile.</p>
</section>
</section>
<section id="makefile">
<h2><code class="docutils literal notranslate"><span class="pre">Makefile</span></code><a class="headerlink" href="#makefile" title="Permalink to this heading">#</a></h2>
<p>Since we have to compile the program on different OS, we have to change the <code class="docutils literal notranslate"><span class="pre">CFLAGS</span></code> separately.</p>
<p>But, how to add different <code class="docutils literal notranslate"><span class="pre">CFLAGS</span></code> for different OS?</p>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">Makefile</span><a class="headerlink" href="#id11" title="Permalink to this code">#</a></div>
<div class="highlight-make notranslate"><div class="highlight"><pre><span></span><span class="nv">CC</span><span class="o">=</span>g++
<span class="nv">CFLAGS</span><span class="o">=</span>-Wall -Wextra -Wpedantic -Werror -std<span class="o">=</span>c++17
<span class="nv">OUTPUT</span><span class="o">=</span>teapot
<span class="nv">SOURCE</span><span class="o">=</span>main.cpp

<span class="cp">ifeq ($(OS),Windows_NT)</span>
<span class="c">	# Windows</span>
	<span class="nv">CFLAGS</span><span class="o">+=</span> -lglu32 -lfreeglut -lopengl32
<span class="cp">else</span>
<span class="c">	# Others</span>
	OS :<span class="o">=</span> <span class="k">$(</span>shell uname<span class="k">)</span>
<span class="cp">	ifeq ($(OS),Linux)</span>
<span class="c">		# Linux</span>
		<span class="nv">CFLAGS</span><span class="o">+=</span> -lglut -lGL -lGLU
<span class="cp">	endif</span>
<span class="cp">	ifeq ($(OS),Darwin)</span>
<span class="c">		# Mac</span>
		<span class="nv">CFLAGS</span><span class="o">+=</span> -framework OpenGL -framework GLUT
<span class="cp">	endif</span>
<span class="cp">endif</span>

<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">clean</span>

<span class="nf">teapot</span><span class="o">:</span><span class="k">$(</span><span class="nv">SOURCE</span><span class="k">)</span>
	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -o <span class="k">$(</span>OUTPUT<span class="k">)</span> <span class="k">$(</span>SOURCE<span class="k">)</span>

<span class="nf">clean</span><span class="o">:</span>
	rm -rf <span class="k">$(</span>OUTPUT<span class="k">)</span>

<span class="nf">run</span><span class="o">:</span><span class="n">teapot</span>
	./<span class="k">$(</span>OUTPUT<span class="k">)</span>
</pre></div>
</div>
</div>
</section>
<section id="cmakelists-txt">
<h2><code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code><a class="headerlink" href="#cmakelists-txt" title="Permalink to this heading">#</a></h2>
<p>Things become easier in <code class="docutils literal notranslate"><span class="pre">CMake</span></code>. We only need to find the libraries and add them. We donâ€™t have to add the flags by hand.</p>
<p>An example:</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">CMakeLists.txt</span><a class="headerlink" href="#id12" title="Permalink to this code">#</a></div>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.5</span><span class="p">)</span>
<span class="nb">project</span><span class="p">(</span><span class="s">helloteapot</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span><span class="w"> </span><span class="s">17</span><span class="p">)</span>

<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_FLAGS</span><span class="w"> </span><span class="s2">&quot;-pedantic -Wall -Wextra -Wvla&quot;</span><span class="p">)</span>

<span class="nb">set</span><span class="p">(</span><span class="s">OpenGL_GL_PREFERENCE</span><span class="w"> </span><span class="s2">&quot;GLVND&quot;</span><span class="p">)</span>

<span class="c"># Find the OpenGL library</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">OpenGL</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">OPENGL_INCLUDE_DIR</span><span class="o">}</span><span class="p">)</span>

<span class="c"># Find the GLUT library</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">GLUT</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">GLUT_INCLUDE_DIR</span><span class="o">}</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">teapot</span><span class="w"> </span><span class="s">main.cpp</span><span class="p">)</span>

<span class="c"># Link OpenGL, GLUT</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">teapot</span><span class="w"> </span><span class="o">${</span><span class="nv">GLUT_LIBRARIES</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nv">OPENGL_LIBRARY</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="understanding-the-code">
<h2>Understanding the Code<a class="headerlink" href="#understanding-the-code" title="Permalink to this heading">#</a></h2>
<p><code class="code highlight cpp c++ docutils literal highlight-c++"><span class="n">glutInit</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span></code></p>
<p>This function will initialize GLUT.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">glutInitWindowSize</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">);</span><span class="w"></span>
<span class="n">glutInitWindowPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="n">glutInitDisplayMode</span><span class="p">(</span><span class="n">GLUT_RGB</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>These two lines set the size, position and display mode. Generally, using <code class="docutils literal notranslate"><span class="pre">GLUT_RGB</span></code> is enough. But if you want to make your animation more fluent, you can use double buffer mode (<code class="docutils literal notranslate"><span class="pre">GLUT_DOUBLE</span></code>).</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>What is Double Buffer Mode?</p>
<p>Double buffering provides two complete color buffers for use in drawing. One buffer is displayed while the other buffer is being drawn into. When the drawing is complete, the two buffers are swapped so that the one that was being viewed is now used for drawing. The swap is almost instantaneous, and thus provides a means of performing animation, like the way a sequence of still photographs, rapidly displayed, appear to depict a moving object. <a class="footnote-reference brackets" href="#id8" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p>
<p>When using <code class="docutils literal notranslate"><span class="pre">GLUT_DOUBLE</span></code>, your picture will have two buffers. One of them is always visible, the other one is not. You always render to the buffer that is not currently visible. When youâ€™re done rendering the frame, you swap the two buffers, making the one you just rendered visible. The one that was previously visible is now invisible, and you use it for rendering the next frame. So the role of the two buffers is reversed each frame. <a class="footnote-reference brackets" href="#id9" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></p>
<p>In short, you will need to add <code class="code highlight cpp c++ docutils literal highlight-c++"><span class="n">glutSwapBuffers</span><span class="p">();</span><span class="w"></span></code> after <code class="code highlight cpp c++ docutils literal highlight-c++"><span class="n">glFlush</span><span class="p">();</span><span class="w"></span></code>.</p>
</div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">glutCreateWindow</span><span class="p">(</span><span class="s">&quot;hello, teapot!&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">glutDisplayFunc</span><span class="p">(</span><span class="n">display</span><span class="p">);</span><span class="w"></span>
<span class="n">glutMainLoop</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p><code class="code highlight cpp c++ docutils literal highlight-c++"><span class="n">glutDisplayFunc</span><span class="w"></span></code> will tell GLUT which function is used to display.</p>
<p><code class="code highlight cpp c++ docutils literal highlight-c++"><span class="n">glutMainLoop</span><span class="w"></span></code> will tell GLUT wait for events.</p>
</section>
<section id="rendering-a-triangle">
<h2>Rendering a triangle<a class="headerlink" href="#rendering-a-triangle" title="Permalink to this heading">#</a></h2>
<p>After running hello teapot, we want to draw something new. The most basic element is triangle.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">glColor3f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="n">glBegin</span><span class="p">(</span><span class="n">GL_TRIANGLES</span><span class="p">);</span><span class="w"></span>
<span class="n">glVertex2d</span><span class="p">(</span><span class="mf">-0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">);</span><span class="w"></span>
<span class="n">glVertex2d</span><span class="p">(</span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">);</span><span class="w"></span>
<span class="n">glVertex2d</span><span class="p">(</span><span class="mi">-0</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.5</span><span class="p">);</span><span class="w"></span>
<span class="n">glEnd</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p>First, set the color. Then, we use <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">gl_Begin()</span></code> to draw a triangle.</p>
<p>Write your own triangle!</p>
</section>
<section id="animation">
<h2>Animation<a class="headerlink" href="#animation" title="Permalink to this heading">#</a></h2>
<p>I will introduce <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">timer()</span></code> and <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">glutMainLoop()</span></code>.</p>
<p>See the following example:</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">main.cpp</span><a class="headerlink" href="#id13" title="Permalink to this code">#</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="kt">void</span><span class="w"> </span><span class="nf">timer</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">v</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</span><span class="hll"><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="p">}</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="n">glutPostRedisplay</span><span class="p">();</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="n">glutTimerFunc</span><span class="p">(</span><span class="mi">1000</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="n">timer</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
</span><span class="hll"><span class="p">}</span><span class="w"></span>
</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* clear window */</span><span class="w"></span>
<span class="w">    </span><span class="n">glClear</span><span class="p">(</span><span class="n">GL_COLOR_BUFFER_BIT</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* draw scene */</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w">  </span><span class="o">&amp;</span><span class="n">num</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">test</span><span class="o">::</span><span class="n">get_instance</span><span class="p">().</span><span class="n">get_number</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kt">float</span><span class="w"> </span><span class="n">num_f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">num</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">glColor3f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">glBegin</span><span class="p">(</span><span class="n">GL_TRIANGLES</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">glVertex2d</span><span class="p">(</span><span class="mf">-0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">glVertex2d</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cos</span><span class="p">(</span><span class="n">num_f</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">sin</span><span class="p">(</span><span class="n">num_f</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">glVertex2d</span><span class="p">(</span><span class="mf">-0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.5</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">glEnd</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="n">num</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">glFlush</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">glutSwapBuffers</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* initialize GLUT, using any command line parameters passed to the program */</span><span class="w"></span>
<span class="w">    </span><span class="n">glutInit</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* setup the size, position, and display mode for new windows */</span><span class="w"></span>
<span class="w">    </span><span class="n">glutInitWindowSize</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">glutInitWindowPosition</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">glutInitDisplayMode</span><span class="p">(</span><span class="n">GLUT_DOUBLE</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="cm">/* create and set up a window */</span><span class="w"></span>
<span class="w">    </span><span class="n">glutCreateWindow</span><span class="p">(</span><span class="s">&quot;hello, teapot!&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">glutDisplayFunc</span><span class="p">(</span><span class="n">display</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">glClearColor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="cm">/* tell GLUT to wait for events */</span><span class="w"></span>
<span class="hll"><span class="w">    </span><span class="n">timer</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
</span><span class="hll"><span class="w">    </span><span class="n">glutMainLoop</span><span class="p">();</span><span class="w"></span>
</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<p>You can assume that variable <code class="docutils literal notranslate"><span class="pre">num</span></code> is somehow a global variable. (itâ€™s only for me to do the demonstration. do not use global variables!)</p>
</section>
<section id="singleton-template">
<h2>Singleton Template<a class="headerlink" href="#singleton-template" title="Permalink to this heading">#</a></h2>
<p>You can see this part after you learn C++ Class.</p>
<p>Define your class:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">test</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="k">private</span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="n">test</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Define your methods and variables here</span>

<span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">&amp;</span><span class="n">get_instance</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">static</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="n">test</span><span class="p">(</span><span class="n">test</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="o">&amp;</span><span class="p">)</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="k">delete</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">test</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="o">&amp;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">delete</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>You can get this instance elsewhere by directly using <code class="code highlight cpp c++ docutils literal highlight-c++"><span class="n">test</span><span class="o">::</span><span class="n">get_instance</span><span class="p">()</span><span class="w"></span></code>.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id7" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://stackoverflow.com/questions/25708688/what-is-the-difference-between-freeglut-vs-glfw">What is the difference between FreeGLUT vs GLFW?</a></p>
</aside>
<aside class="footnote brackets" id="id8" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">2</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="http://www2.cs.arizona.edu/classes/cs433/spring02/opengl/dblbuffer.html#:~:text=Double%20buffering%20provides%20two%20complete,is%20now%20used%20for%20drawing.">Double Buffering in GLUT</a></p>
</aside>
<aside class="footnote brackets" id="id9" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">3</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://stackoverflow.com/questions/28298540/difference-between-single-bufferedglut-single-and-double-buffered-drawingglut">Difference between single buffered(GLUT_SINGLE) and double buffered drawing(GLUT_DOUBLE)</a></p>
</aside>
</aside>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../mid2/rc_part3.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Basic C </div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../l7/lab7.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">ENGR151 Lab 7: Trees</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Linsy King
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">ENGR151 Lab 8: OpenGL</a><ul>
<li><a class="reference internal" href="#opengl">OpenGL</a></li>
<li><a class="reference internal" href="#glut-and-freeglut">GLUT and FreeGLUT</a></li>
<li><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li><a class="reference internal" href="#linux">Linux</a></li>
<li><a class="reference internal" href="#macos">MacOS</a></li>
<li><a class="reference internal" href="#windows">Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hello-teapot">Hello Teapot</a><ul>
<li><a class="reference internal" href="#id2">Linux</a></li>
<li><a class="reference internal" href="#id3">MacOS</a></li>
<li><a class="reference internal" href="#id4">Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#makefile"><code class="docutils literal notranslate"><span class="pre">Makefile</span></code></a></li>
<li><a class="reference internal" href="#cmakelists-txt"><code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code></a></li>
<li><a class="reference internal" href="#understanding-the-code">Understanding the Code</a></li>
<li><a class="reference internal" href="#rendering-a-triangle">Rendering a triangle</a></li>
<li><a class="reference internal" href="#animation">Animation</a></li>
<li><a class="reference internal" href="#singleton-template">Singleton Template</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    </body>
</html>